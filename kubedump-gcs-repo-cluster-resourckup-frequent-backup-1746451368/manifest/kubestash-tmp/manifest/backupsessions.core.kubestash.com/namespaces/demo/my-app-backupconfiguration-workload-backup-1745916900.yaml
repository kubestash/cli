apiVersion: core.kubestash.com/v1alpha1
kind: BackupSession
metadata:
  deletionGracePeriodSeconds: 0
  deletionTimestamp: "2025-04-29T08:55:40Z"
  finalizers:
  - kubestash.com/cleanup
  labels:
    kubestash.com/invoker-name: my-app-backupconfiguration
  name: my-app-backupconfiguration-workload-backup-1745916900
  namespace: demo
  ownerReferences:
  - apiVersion: core.kubestash.com/v1alpha1
    blockOwnerDeletion: true
    controller: true
    kind: BackupConfiguration
    name: my-app-backupconfiguration
    uid: 1d83cb10-9d1a-4f18-81a8-aa6441332b14
spec:
  invoker:
    apiGroup: core.kubestash.com
    kind: BackupConfiguration
    name: my-app-backupconfiguration
  retryLeft: 2
  session: workload-backup
status:
  conditions:
  - lastTransitionTime: "2025-04-29T08:55:00Z"
    message: Snapshots have been ensured successfully.
    reason: SuccessfullyEnsuredSnapshots
    status: "True"
    type: SnapshotsEnsured
  - lastTransitionTime: "2025-04-29T08:55:00Z"
    message: 'Failed to ensure Backup Executor. Reason: "failed to ensure backup job
      rbac: clusterroles.rbac.authorization.k8s.io \"kubestash-backup-job\" is forbidden:
      user \"system:serviceaccount:stash:kubestash-kubestash-operator\" (groups=[\"system:serviceaccounts\"
      \"system:serviceaccounts:stash\" \"system:authenticated\"]) is attempting to
      grant RBAC permissions not currently held:\n{APIGroups:[\"\"], Resources:[\"configmaps\"],
      Verbs:[\"list\"]}"'
    reason: FailedToEnsureBackupExecutor
    status: "False"
    type: BackupExecutorEnsured
  - lastTransitionTime: "2025-04-29T08:55:00Z"
    reason: SuccessfullyCleanedSessionHistory
    status: "True"
    type: SessionHistoryCleaned
  - lastTransitionTime: "2025-04-29T08:55:00Z"
    message: Metrics have been pushed successfully.
    reason: SuccessfullyPushedMetrics
    status: "True"
    type: MetricsPushed
  duration: 1s
  nextRetry: "2025-04-29T08:56:00Z"
  phase: Failed
  snapshots:
  - appRef:
      apiGroup: apps
      kind: StatefulSet
      name: my-app
      namespace: demo
    name: gcs-repo-for-statefulset-my-app-tion-workload-backup-1745916900
    phase: Pending
    repository: gcs-repo-for-statefulset
  totalSnapshots: 1
